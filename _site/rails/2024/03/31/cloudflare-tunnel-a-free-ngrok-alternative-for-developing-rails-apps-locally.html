<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Cloudflare Tunnel: a free ngrok alternative for exposing local Rails apps to the internet | Kyrylo Silin</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Cloudflare Tunnel: a free ngrok alternative for exposing local Rails apps to the internet" />
<meta name="author" content="Kyrylo Silin" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Imagine you want to test a new page that you just wrote the code for against a real mobile device. You don’t want to push it into production without testing it. You somehow need to expose your local Rails server to the internet so that you (or anyone else) could test it before it goes live." />
<meta property="og:description" content="Imagine you want to test a new page that you just wrote the code for against a real mobile device. You don’t want to push it into production without testing it. You somehow need to expose your local Rails server to the internet so that you (or anyone else) could test it before it goes live." />
<link rel="canonical" href="https://kyrylo.org/rails/2024/03/31/cloudflare-tunnel-a-free-ngrok-alternative-for-developing-rails-apps-locally.html" />
<meta property="og:url" content="https://kyrylo.org/rails/2024/03/31/cloudflare-tunnel-a-free-ngrok-alternative-for-developing-rails-apps-locally.html" />
<meta property="og:site_name" content="Kyrylo Silin" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-03-31T13:00:00+03:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Cloudflare Tunnel: a free ngrok alternative for exposing local Rails apps to the internet" />
<meta name="twitter:site" content="@kyrylosilin" />
<meta name="twitter:creator" content="@Kyrylo Silin" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Kyrylo Silin","url":"https://kyrylo.org/"},"dateModified":"2025-11-18T18:46:25+02:00","datePublished":"2024-03-31T13:00:00+03:00","description":"Imagine you want to test a new page that you just wrote the code for against a real mobile device. You don’t want to push it into production without testing it. You somehow need to expose your local Rails server to the internet so that you (or anyone else) could test it before it goes live.","headline":"Cloudflare Tunnel: a free ngrok alternative for exposing local Rails apps to the internet","mainEntityOfPage":{"@type":"WebPage","@id":"https://kyrylo.org/rails/2024/03/31/cloudflare-tunnel-a-free-ngrok-alternative-for-developing-rails-apps-locally.html"},"url":"https://kyrylo.org/rails/2024/03/31/cloudflare-tunnel-a-free-ngrok-alternative-for-developing-rails-apps-locally.html"}</script>
<!-- End Jekyll SEO tag -->
<link type="application/atom+xml" rel="alternate" href="https://kyrylo.org/feed.xml" title="Kyrylo Silin" /><link rel="icon" type="image/png" href="/assets/images/favicon-96x96.png" sizes="96x96" />
  <link rel="shortcut icon" href="/assets/images/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-title" content="Kyrylo Silin" />
  <link rel="manifest" href="/assets/images/site.webmanifest" />

  <script defer data-domain="kyrylo.org" src="https://plausible.telebugs.com/js/script.hash.outbound-links.tagged-events.js"></script>
  <script>window.plausible = window.plausible || function () { (window.plausible.q = window.plausible.q || []).push(arguments) }</script>
  <script data-site="KDDVSIV" src="https://analytics.kyrylo.org/script.js" defer></script>

  <style>
    body {
      font: 16px "Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, Verdana, sans-serif;
      line-height: 1.5;
    }

    main,
    footer {
      max-width: 70ch;
      margin: 0 auto;
    }

    pre {
      overflow: auto;
    }

    pre,
    blockquote {
      background-color: ghostwhite;
      color: darkslategray;
    }

    .article img {
      max-width: 100%;
    }

    .article a,
    code {
      word-break: break-word;
    }

    code {
      font-size: 14px;
    }

    blockquote {
      margin: 1em 0;
      padding-left: 20px;
      border-left: 4px solid dimgray;
    }

    nav a {
      margin-right: 8px;
    }

    a {
      color: blue;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    a:visited:active,
    a:active {
      color: red;
    }

    a:visited {
      color: purple;
    }

    ul.blog-posts {
      list-style-type: none;
      padding: unset;
      margin: 0;
    }

    ul.blog-posts li {
      display: flex;
      gap: 1ch;
    }

    ul.blog-posts li span {
      flex: 0 0 13ch;
    }

    ul.blog-posts time {
      font-family: monospace;
    }

    @media (prefers-color-scheme: dark) {
      a {
        color: mediumslateblue;
      }

      a:visited:active,
      a:active {
        color: orangered;
      }

      a:visited {
        color: plum;
      }

      pre,
      blockquote {
        color: lightsteelblue;
        background-color: #2b2b2b;
      }
    }
  </style>
</head>
<body>
    <main>
      <article itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <h1 itemprop="name headline">Cloudflare Tunnel: a free ngrok alternative for exposing local Rails apps to the internet</h1>

    <p>
      <time datetime="2024-03-31T13:00:00+03:00" itemprop="datePublished">
        Mar 31, 2024
      </time>
      |
      <span itemprop="author" itemscope itemtype="http://schema.org/Person">
        <picture>
          <source srcset="/assets/images/kyrylo-silin.webp 2x, /assets/images/kyrylo-silin.webp 1x" type="image/webp">
          <img src="/assets/images/kyrylo-silin.webp" alt="Kyrylo Silin" width="15" height="15">
        </picture>
        <span itemprop="name">
          <a href="/">Kyrylo Silin</a>
        </span>
      </span>
      &middot;
      <a href="https://x.com/kyrylo" target="_blank">@kyrylo</a>
      &middot;
      <a href="https://bsky.app/profile/kyrylo.org" target="_blank">bluesky:@kyrylo.org</a>
      &middot;
      <a href="https://mastodon.social/@kyrylosilin" target="_blank">mastodon:@kyrylosilin</a>
    </p>
  </header>

  <div class="article" itemprop="articleBody">
    <p>Imagine you want to test a new page that you just wrote the code for against a
real mobile device. You don’t want to push it into production without testing
it. You somehow need to expose your local Rails server to the internet so that
you (or anyone else) could test it before it goes live.</p>

<p>These is a very common problem. Luckily, it’s been solved already. My go-to tool
for this was <a href="https://ngrok.com">ngrok</a> or <a href="https://github.com/localtunnel/localtunnel">localtunnel</a>. Both of these tools
are great, but they didn’t fit my needs perfectly.</p>

<p>Ngrok is very advanced, but I don’t need all of its features. The feature that I
need is a static domain name, so that I can expose my local Rails app to the
same address. On the free version, ngrok binds to a subdomain assigned to you
randomly. A static domain name is a must if you want to save time developing
your app.</p>

<p>Localtunnel is an open-source alternative to ngrok that allows you to do just
that:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lt <span class="nt">--port</span> 3000 <span class="nt">--subdomain</span><span class="o">=</span>telebugs <span class="nt">--print-requests</span>
</code></pre></div></div>

<p>There are a bunch of problems with localtunnel, though:</p>

<ol>
  <li>It’s not maintained anymore, although it still works</li>
  <li><a href="https://github.com/localtunnel/localtunnel/issues/619">Downtimes do happen</a></li>
  <li>
    <p>Sometimes, the tunnel just crashes, or your <a href="https://github.com/localtunnel/localtunnel/issues/248">subdomain doesn’t get bound</a></p>

    <p>To address the former, I wrapped my localtunnel in a <code class="language-plaintext highlighter-rouge">while</code> loop like this:</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">while </span><span class="nb">true</span><span class="p">;</span> <span class="k">do </span>lt <span class="nt">--port</span> 3000 <span class="nt">--subdomain</span><span class="o">=</span>telebugs <span class="nt">--print-requests</span><span class="p">;</span> <span class="nb">sleep </span>1<span class="p">;</span> <span class="k">done</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Anyone can hijack the subdomain that you use when your tunnel is not active.</p>

    <p>In fact, this happened to me last year, so I had to choose another subdomain:</p>

    <blockquote class="twitter-tweet"><p lang="en" dir="ltr">Welp, crypto bros have &quot;hijacked&quot; my localtunnel subdomain that I&#39;ve been using for Synonym Sprint.<br /><br />I had to choose a new name instead.<br /><br />It happened yesterday, and I thought maybe today it would be free again, but no, it is still running.<br /><br />It&#39;s not a big deal, since changing is… <a href="https://t.co/G9eL8Lq4Hq">pic.twitter.com/G9eL8Lq4Hq</a></p>&mdash; Kyrylo Silin (@kyrylosilin) <a href="https://twitter.com/kyrylosilin/status/1740650930842878247?ref_src=twsrc%5Etfw">December 29, 2023</a></blockquote>
    <script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  </li>
</ol>

<h2 id="meet-the-cloudflare-tunnel">Meet the Cloudflare Tunnel</h2>

<blockquote>
  <p>Your domain name must be managed by Cloudflare. Otherwise, this tutorial
<em>will not work</em> for you.</p>
</blockquote>

<p>Why would you go through all these struggles, when around the corner, there’s a
better alternative that solves all our problems?</p>

<p>Without further ado, let’s replace ngrok/localtunnel with
<a href="https://www.cloudflare.com/products/tunnel/">Cloudflare Tunnel</a> in our Rails 7 app!</p>

<h3 id="installation">Installation</h3>

<p>Let’s <a href="https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/downloads/">install</a> the <code class="language-plaintext highlighter-rouge">cloudflared</code> CLI app. On macOS, it’s as simple as:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install </span>cloudflared
</code></pre></div></div>

<p>Confirm that it’s installed via:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% cloudflared <span class="nt">--version</span>
cloudflared version 2024.3.0 <span class="o">(</span>built 2024-03-19T18:08:31Z<span class="o">)</span>
</code></pre></div></div>

<h3 id="create-a-new-tunnel">Create a new tunnel</h3>

<p>First, you need to log into your Cloudflare account via <code class="language-plaintext highlighter-rouge">cloudflared</code> so that
you can manage CF tunnels via the CLI:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% cloudflared tunnel login
A browser window should have opened at the following URL:

https://dash.cloudflare.com/argotunnel?aud<span class="o">=</span>&amp;callback<span class="o">=</span>https%3A%2F%2Flogin.cloudflareaccess.org%2F0n1R7UqQdRd7vR3D4CT3D4wzHoB0-63_RZ63vSVzIhakw%3D

If the browser failed to open, please visit the URL above directly <span class="k">in </span>your browser.
You have successfully logged <span class="k">in</span><span class="nb">.</span>
If you wish to copy your credentials to a server, they have been saved to:
/Users/kyrylo/.cloudflared/cert.pem
</code></pre></div></div>

<p>Choose the domain for your Rails app and click “Authorize”. That’s all!</p>

<p><img src="https://imgur.com/Ao4vTap.png" style="height: 500px" alt="Authorize Cloudflare Tunnel" /></p>

<p>If <code class="language-plaintext highlighter-rouge">cloudflared tunnel login</code> didn’t print a link, don’t worry. Just continue
reading.</p>

<p>Now, you need to create a named tunnel. I will name my tunnel <code class="language-plaintext highlighter-rouge">telebugs</code>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% cloudflared tunnel create telebugs
Tunnel credentials written to /Users/kyrylo/.cloudflared/3de42678-313b-4801-bd71-1e4dda81880b.json. cloudflared chose this file based on where your origin certificate was found. Keep this file secret. To revoke these credentials, delete the tunnel.

Created tunnel telebugs with <span class="nb">id </span>3de42678-313b-4801-bd71-1e4dda81880b
</code></pre></div></div>

<p>You will use that tunnel to access your local Rails app. Now you need to update
your DNS records to point to that tunnel. Choose a subdomain that you would like
to use to access your local Rails app. <code class="language-plaintext highlighter-rouge">localhost</code> seems like a good choice:
it’s easy to understand, and it’s unlikely you will want it for your production
needs.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% cloudflared tunnel route dns telebugs localhost.telebugs.com
2024-03-31T09:59:33Z INF Added CNAME localhost.telebugs.com which will route to this tunnel <span class="nv">tunnelID</span><span class="o">=</span>3de42678-313b-4801-bd71-1e4dda81880b
</code></pre></div></div>

<p>Go to your DNS settings for the Cloudflare domain you use and verify that the
Tunnel CNAME record was added.</p>

<p>If not, then add a new <code class="language-plaintext highlighter-rouge">CNAME</code> record manually. The target should be the tunnel
ID you received when you created the tunnel plus <code class="language-plaintext highlighter-rouge">.cfargotunnel.com</code>. In my
case, it’s <code class="language-plaintext highlighter-rouge">3de42678-313b-4801-bd71-1e4dda81880b.cfargotunnel.com</code>:</p>

<p><img src="https://imgur.com/DQDGKaV.png" alt="DNS settings. Adding the Cloudflare Tunnel CNAME" /></p>

<h3 id="configure-your-rails-app-to-use-the-tunnel">Configure your Rails app to use the tunnel</h3>

<p>Create <code class="language-plaintext highlighter-rouge">config/cloudflare-tunnel.yml</code> with the following contents:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># config/clouflare-tunnel.yml</span>
<span class="na">tunnel</span><span class="pi">:</span> <span class="s">3de42678-313b-4801-bd71-1e4dda81880b</span>
<span class="na">credentials-file</span><span class="pi">:</span> <span class="s">/Users/kyrylo/.cloudflared/3de42678-313b-4801-bd71-1e4dda81880b.json</span>

<span class="na">ingress</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">hostname</span><span class="pi">:</span> <span class="s">localhost.telebugs.com</span>
    <span class="na">service</span><span class="pi">:</span> <span class="s">http://localhost:3000</span>
  <span class="pi">-</span> <span class="na">service</span><span class="pi">:</span> <span class="s">http_status:404</span>
</code></pre></div></div>

<p>Note: you must use the full path for <code class="language-plaintext highlighter-rouge">credentials-file</code>. Cloudflare will not
expand <code class="language-plaintext highlighter-rouge">$HOME</code> or <code class="language-plaintext highlighter-rouge">~/</code> for you, so
<code class="language-plaintext highlighter-rouge">~/.cloudflared/3de42678-313b-4801-bd71-1e4dda81880b.json</code> <em>will</em> fail:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Tunnel credentials file <span class="s1">'~/.cloudflared/3de42678-313b-4801-bd71-1e4dda81880b.json'</span> doesn<span class="s1">'t exist or is not a file
</span></code></pre></div></div>

<p>Next, validate the tunnel’s ingress:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% cloudflared tunnel <span class="nt">--config</span> config/cloudflare-tunnel.yml ingress validate telebugs
Validating rules from config/cloudflare-tunnel.yml
OK
</code></pre></div></div>

<p>Ok, we’re all good. Now we can add this file to <code class="language-plaintext highlighter-rouge">.gitignore</code>, copy its contents
to <code class="language-plaintext highlighter-rouge">config/cloudflare-tunnel.yml.example</code>, redact <code class="language-plaintext highlighter-rouge">tunnel</code> and
<code class="language-plaintext highlighter-rouge">credentials-file</code> values, and track it with <code class="language-plaintext highlighter-rouge">git</code>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% <span class="nb">echo </span>config/cloudflare-tunnel.yml <span class="o">&gt;&gt;</span> .gitignore
</code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% <span class="nb">cp </span>config/cloudflare-tunnel.yml config/cloudflare-tunnel.yml.example
</code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># config/clouflare-tunnel.yml.example</span>
tunnel: CHANGE_ME
credentials-file: CHANGE_ME

ingress:
  - <span class="nb">hostname</span>: localhost.telebugs.com
    service: http://localhost:3000
  - service: http_status:404
</code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add config/clouflare-tunnel.yml.example
</code></pre></div></div>

<p>One last thing we need to do is add <code class="language-plaintext highlighter-rouge">localhost.telebugs.com</code> to the list of
allowed domains so that Rack doesn’t block it:</p>

<div class="language-rb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># config/environments/development.rb</span>

<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">configure</span> <span class="k">do</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">hosts</span> <span class="o">&lt;&lt;</span> <span class="s2">"localhost.telebugs.com"</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="run-the-tunnel">Run the tunnel</h3>

<p>Awesome! We can now start using our tunnel. Let’s confirm that it works:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% cloudflared tunnel <span class="nt">--url</span> localhost:3000 <span class="nt">--config</span> config/cloudflare-tunnel.yml run telebugs
2024-03-31T11:19:10Z INF Starting tunnel <span class="nv">tunnelID</span><span class="o">=</span>3de42678-313b-4801-bd71-1e4dda81880b
</code></pre></div></div>

<p>Now, make sure your local Rails app is running, navigate to
<a href="https://telebugs.com"><code class="language-plaintext highlighter-rouge">https://localhost.telebugs.com</code></a> (use your own domain), and verify that your
local Rails server gets hit.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% curl <span class="nt">-I</span> https://localhost.telebugs.com
HTTP/2 200
</code></pre></div></div>

<p>Nice! We’re almost done!</p>

<p>Starting the tunnel every time is a hassle, so add it to the <code class="language-plaintext highlighter-rouge">Procfile</code>, so that
it is started automatically every time you launch your Rails app locally.</p>

<p>Edit <code class="language-plaintext highlighter-rouge">Procfile</code> and add the following:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Procfile</span>
tunnel: cloudflared tunnel <span class="nt">--url</span> localhost:3000 <span class="nt">--config</span> config/cloudflare-tunnel.yml run telebugs
</code></pre></div></div>

<p>Now, every time you run <code class="language-plaintext highlighter-rouge">bin/dev</code>, your Rails 7 application will start the
tunnel, and you will be able to access your local server from anywhere on the
internet. For free!</p>

<p>Was the article helpful? <a href="https://x.com/kyrylo">Follow me on X/Twitter</a>
where I post daily about my indie hacking journey and the projects I work on.
You can discuss this article on X/Twitter, too:
<a href="https://twitter.com/kyrylosilin/status/1774406300295717101">https://twitter.com/kyrylosilin/status/1774406300295717101</a></p>


  </div>
</article>

<hr>

<div>
  
    <div>
      Next: <a href="/telegram/kamal/2024/06/02/how-to-deploy-a-telegram-bot-with-kamal.html" rel="next" title="How to build and deploy a Telegram bot with Kamal">How to build and deploy a Telegram bot with Kamal</a>
    </div>
  
  
    <div>
      Prev: <a href="/coffee-world-rush/2024/03/20/coffee-world-rush-a-leaderboard-for-all-coffee-drinkers-around-the-world.html" rel="prev" title="Coffee World Rush: a leaderboard for coffee drinkers all around the world">Coffee World Rush: a leaderboard for coffee drinkers all around the world</a>
    </div>
  
</div>

    </main><footer>
  <hr>
  <small>
    <p><a href="/">Kyrylo Silin</a> — entrepreneur, software engineer, and web developer.</p>
    <p>
      Find me on:
      <a href="https://x.com/kyrylo" target="_blank">x</a>
      &middot;
      <a href="https://bsky.app/profile/kyrylo.org" target="_blank">bluesky</a>
      &middot;
      <a href="https://mastodon.social/@kyrylosilin" target="_blank">mastodon</a>
    </p>
    <p>
      <a href="/feed.xml">ATOM feed</a>
      |
      <a href="https://github.com/kyrylo/kyrylo.org">GitHub</a> (CC BY-NC-SA 4.0)
    </p>
    <p>Last modified: <time datetime="2025-11-18T18:46:25+02:00">November 18, 2025</time></p>
  </small>
</footer>
</body>

</html>
